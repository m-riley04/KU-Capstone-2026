# Polypod sway config - dual-display kiosk

# Don't try to start Xwayland (not installed)
xwayland disable

# -----------------------------------------------
# Outputs
# -----------------------------------------------
# SPI G display (320x480) - let sway auto-detect mode
output SPI-1 {
    position 0 0
    transform normal
}

# DSI E display
output DSI-2 {
    position 320 0
    transform normal
}

# -----------------------------------------------
# Kiosk appearance
# -----------------------------------------------
default_border none
default_floating_border none
font pango:monospace 1
titlebar_border_thickness 0
titlebar_padding 0

# No bar (use /bin/true to avoid swaybar dbus errors)
bar {
    swaybar_command /bin/true
}

gaps inner 0
gaps outer 0

# -----------------------------------------------
# Window assignment
# -----------------------------------------------
# Flutter GTK apps use the binary name as app_id.
# After first boot, check both windows with:
#   swaymsg -t get_tree | grep -E "app_id|name"
# Then adjust these rules as needed.
assign [app_id="polypod_hw"] output SPI-1
# assign [title="Secondary"] output DSI-2

for_window [app_id="polypod_hw"] fullscreen enable

# -----------------------------------------------
# Input
# -----------------------------------------------
focus_follows_mouse no
mouse_warping none

# -----------------------------------------------
# Auto-start the app
# -----------------------------------------------
exec /opt/polypod/app/polypod_hw
